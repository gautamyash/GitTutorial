<!DOCTYPE html>
<html>
  <head>
    <title>Booking Appointment App</title>
  </head>
  <body>
    <h1>Booking Appointment App</h1>
    <form id="bookingForm">
      <label for="name">Name:</label>
      <input type="text" id="name" name="name" required><br><br>

      <label for="email">Email:</label>
      <input type="email" id="email" name="email" required><br><br>

      <input type="submit" value="Submit">
    </form>
    
    <div id="bookingData"></div>
    
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script>
      // Save form data to cloud server on form submit
      document.getElementById('bookingForm').addEventListener('submit', function(e) {
        e.preventDefault();
        var name = document.getElementById('name').value;
        var email = document.getElementById('email').value;

        var bookingData = {
          name: name,
          email: email,
        };
        
        // Send a POST request to crudcrud.com to store the booking data in the cloud
        axios.post('https://crudcrud.com/api/be3606fc9cb644f69fdac9df5d85cc3b/bookings', bookingData)
          .then(function(response) {
            // Show a success message if the data was saved successfully
            alert('Booking data saved successfully!');
            // Reset the form fields
            document.getElementById('name').value = '';
            document.getElementById('email').value = '';
          })
          .catch(function(error) {
            // Show an error message if there was a problem saving the data
            alert('An error occurred while saving booking data.');
            console.error(error);
          });
      });
      
      // Function to show booking data on screen
      function showBookingData() {
        // Retrieve all booking data from crudcrud.com
        axios.get('https://crudcrud.com/api/be3606fc9cb644f69fdac9df5d85cc3b/bookings')
          .then(function(response) {
            var bookingsArray = response.data;

            // Create a new list element for each booking in the array
            var bookingList = document.getElementById('bookingData');
            bookingList.innerHTML = '';

            for (var i = 0; i < bookingsArray.length; i++) {
              var booking = bookingsArray[i];
              var bookingListItem = document.createElement('li');
              bookingListItem.innerHTML = 'Name: ' + booking.name + ', Email: ' + booking.email;
              bookingList.appendChild(bookingListItem);
            }
          })
          .catch(function(error) {
            // Show an error message if there was a problem retrieving the data
            alert('An error occurred while retrieving booking data.');
            console.error(error);
          });
      }
      
      // Call showBookingData on page load to display any previously saved booking data
      showBookingData();
    </script>
 
