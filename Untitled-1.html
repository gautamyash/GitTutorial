<!DOCTYPE html>
<html>
  <head>
    <title>Booking Appointment App</title>
  </head>
  <body>
    <h1>Booking Appointment App</h1>
    <form id="bookingForm">
      <label for="name">Name:</label>
      <input type="text" id="name" name="name" required><br><br>

      <label for="email">Email:</label>
      <input type="email" id="email" name="email" required><br><br>

      <input type="submit" value="Submit">
    </form>
    
    <h2>Booking List</h2>
    <ul id="bookingData"></ul>
    
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script>
      document.getElementById('bookingForm').addEventListener('submit', function(e) {
        e.preventDefault();
        var name = document.getElementById('name').value;
        var email = document.getElementById('email').value;

        var bookingData = {
          name: name,
          email: email,
        };
        
        
        axios.post('https://crudcrud.com/api/be3606fc9cb644f69fdac9df5d85cc3b/bookings', bookingData)
          .then(function(response) {
            alert('Booking data saved successfully!');
            document.getElementById('name').value = '';
            document.getElementById('email').value = '';
            showBookingData();
          })
          .catch(function(error) {
            
            alert('An error occurred while saving booking data.');
            console.error(error);
          });
      });
      
        function showBookingData() {
          axios.get('https://crudcrud.com/api/be3606fc9cb644f69fdac9df5d85cc3b/bookings')
          .then(function(response) {
            var bookingsArray = response.data;
            var bookingList = document.getElementById('bookingData');
            bookingList.innerHTML = '';
              for (var i = 0; i < bookingsArray.length; i++) {
              var booking = bookingsArray[i];
              var bookingListItem = document.createElement('li');
              bookingListItem.innerHTML = 'Name: ' + booking.name + ', Email: ' + booking.email;
              bookingList.appendChild(bookingListItem);
            }
          })
          .catch(function(error) {
            alert('An error occurred while retrieving booking data.');
            console.error(error);
          });
      }
      document.addEventListener('DOMContentLoaded', function() {
        showBookingData();
      });
    </script>
  </body>
</html>
